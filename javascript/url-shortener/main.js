/**URL SHORTENER - Patterns: Strategy, Repository, Factory, Singleton*/
class URLShortener{constructor(){if(URLShortener.instance)return URLShortener.instance;this.urlMap=new Map();this.reverseMap=new Map();this.baseUrl='https://short.ly/';URLShortener.instance=this}generateCode(length=6){return Array.from({length},()=>'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'[Math.floor(Math.random()*62)]).join('')}shorten(longUrl,customAlias=null){if(this.reverseMap.has(longUrl))return this.baseUrl+this.reverseMap.get(longUrl);let code=customAlias||this.generateCode();while(this.urlMap.has(code))code=this.generateCode();this.urlMap.set(code,longUrl);this.reverseMap.set(longUrl,code);const shortUrl=this.baseUrl+code;console.log(`âœ“ Shortened: ${shortUrl}`);return shortUrl}expand(shortUrl){return this.urlMap.get(shortUrl.replace(this.baseUrl,''))||null}}
function main(){console.log('='.repeat(70));console.log('URL SHORTENER - Demo');console.log('='.repeat(70));const shortener=new URLShortener();const short=shortener.shorten('https://example.com/very/long/url/path');console.log(`Expands to: ${shortener.expand(short)}`);console.log('\n'+'='.repeat(70));console.log('DEMO COMPLETE');console.log('='.repeat(70))}
if(typeof require!=='undefined'&&require.main===module)main();

