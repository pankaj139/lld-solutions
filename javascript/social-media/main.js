/**SOCIAL MEDIA PLATFORM - Patterns: Observer, Strategy, Factory, Singleton, Composite*/
class User{constructor(userId,username){this.userId=userId;this.username=username;this.followers=new Set();this.following=new Set()}follow(userId){this.following.add(userId)}}
class Post{constructor(postId,author,content){this.postId=postId;this.author=author;this.content=content;this.timestamp=new Date();this.likes=new Set();this.comments=[]}like(userId){this.likes.add(userId)}addComment(comment){this.comments.push(comment)}}
class Comment{constructor(author,content){this.author=author;this.content=content;this.timestamp=new Date()}}
class SocialMediaService{constructor(){if(SocialMediaService.instance)return SocialMediaService.instance;this.users=new Map();this.posts=new Map();this.postCounter=0;SocialMediaService.instance=this}registerUser(user){this.users.set(user.userId,user);console.log(`âœ“ Registered: @${user.username}`)}followUser(followerId,followeeId){const follower=this.users.get(followerId),followee=this.users.get(followeeId);follower.follow(followeeId);followee.followers.add(followerId);console.log(`âœ“ @${follower.username} â†’ @${followee.username}`)}createPost(userId,content){const user=this.users.get(userId),postId=`P${String(this.postCounter).padStart(4,'0')}`;this.postCounter++;const post=new Post(postId,user,content);this.posts.set(postId,post);console.log(`âœ“ Post by @${user.username}: ${content}`);return post}getFeed(userId){const user=this.users.get(userId);return Array.from(this.posts.values()).filter(p=>user.following.has(p.author.userId)).sort((a,b)=>b.timestamp-a.timestamp)}}
function main(){console.log('='.repeat(70));console.log('SOCIAL MEDIA PLATFORM - Demo');console.log('='.repeat(70));const service=new SocialMediaService();const alice=new User('U001','alice'),bob=new User('U002','bob');service.registerUser(alice);service.registerUser(bob);service.followUser(alice.userId,bob.userId);const post=service.createPost(bob.userId,'Hello world!');post.like(alice.userId);console.log(`\nðŸ“° Alice's feed: ${service.getFeed(alice.userId).length} posts`);console.log('\n'+'='.repeat(70));console.log('DEMO COMPLETE');console.log('='.repeat(70))}
if(typeof require!=='undefined'&&require.main===module)main();

